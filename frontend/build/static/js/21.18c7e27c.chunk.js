(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[21],{574:function(e,t,c){"use strict";c.r(t);var n=c(91),r=c(10),a=c(1),i=c.n(a),o=c(453),s=c(355),l=c(348),d=c(328),j=c(353),u=c(329),b=c(351),m=c(342),x=c(338),O=c(352),h=c(379),f=c(383),p=c(380),g=c(381),y=c(330),v=c(367),C=c(55),N=c(485),B=c.n(N),w=c(484),k=c.n(w),S=c(357),z=c(350),I=c(130),P=c(374),D=c(375),T=c(391),W=c(354),R=c(491),q=c(89),A=c(62),E=c(360),H=c(385),L=c(160),G=c(534),M=c.n(G),J=c(554),U=c.n(J),X=c(331),$=c(327),F=c(366),K=c(384),Q=c(365),V=c(389),Y=c(75),Z=Object(o.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column"},buttonBox:{display:"flex",flexDirection:"row",justifyContent:"space-between"},backButton:{backgroundColor:e.colors.red},addButton:{backgroundColor:Y.a[500]}}}));function _(e){var t=e.customisations,c=e.onSelect,o=e.onDone,s=e.onCancel,l=e.selected,j=Z(),u=i.a.useState([0]),b=Object(n.a)(u,2),x=b[0],O=b[1],h=function(e){var t=x.indexOf(e.id),n=Object(A.a)(x);-1===t?(n.push(e.id),c(e,"add")):(n.splice(t,1),c(e,"remove")),O(n)};return Object(a.useEffect)((function(){l.forEach((function(e){e.id&&h(e)}))}),[l]),Object(r.jsxs)(X.a,{className:j.root,children:[Object(r.jsx)(Q.a,{primary:"Available addons"}),t.map((function(e){var t="checkbox-list-label-".concat(e.id);return Object(r.jsxs)($.a,{role:void 0,dense:!0,button:!0,onClick:function(){h(e)},children:[Object(r.jsx)(F.a,{children:Object(r.jsx)(V.a,{edge:"start",checked:-1!==x.indexOf(e.id),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),Object(r.jsx)(Q.a,{primary:e.name}),Object(r.jsx)(K.a,{children:Object(r.jsx)(Q.a,{primary:e.price})})]},e.id)})),Object(r.jsxs)(m.a,{className:j.buttonBox,children:[Object(r.jsx)(d.a,{className:j.backButton,onClick:function(){s()},variant:"contained",children:"Go back"}),Object(r.jsx)(d.a,{className:j.addButton,onClick:function(){o(!1)},variant:"contained",children:"Add to cart"})]})]})}var ee=c(13),te=Object(o.a)((function(e){return{media:{height:140},button:{border:"1px solid black",color:e.palette.text.primary,"&:hover":{color:"green","& .MuiButton-endIcon":{fill:"black",transform:"translateX(3px)",transition:"all 0.2s ease"}}},customisationButton:{fontSize:".6rem",width:"13rem",lineHeight:".1rem",marginBottom:"1rem"},productName:{color:e.palette.text.primary,fontSize:"1.6rem",fontWeight:"750",lineHeight:"1.8rem"},productCard:{marginBottom:".7rem","&:hover":{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}},focused:{backgroundColor:"#f1faee"},productCardContent:{display:"flex",flexDirection:"column"},price:{color:e.palette.text.primary,fontSize:"1rem"},description:{color:e.palette.text.primary,fontSize:".7rem"},addButton:{fill:e.colors.red},removeButton:{fill:e.colors.green}}})),ce=function(e){var t=e.product,c=te(),i=Object(C.b)(),o=(Object(C.c)((function(e){return e.order}))||{}).selectedProducts||[],s=Object(a.useRef)([]),x=Object(a.useState)(!1),O=Object(n.a)(x,2),h=O[0],f=O[1],p=Object(a.useRef)({}),g=o.find((function(e){return e.id===t.id}))||{},v=function(){p.current.customisations=s.current,i(Object(q.e)(p.current)),p.current={},s.current=[],f(!1)};return Object(r.jsx)(L.a,{effect:"pulse",children:Object(r.jsxs)(b.a,{className:h?Object(ee.a)(c.productCard,c.focused):c.productCard,children:[Object(r.jsx)(j.a,{className:c.productCardContent,children:h?Object(r.jsx)(E.a,{in:!0,children:Object(r.jsx)(_,{selected:s.current,customisations:t.customisation,onDone:v,onCancel:function(){f(!1)},onSelect:function(e,t){"add"===t?s.current=[].concat(Object(A.a)(s.current),[e]):"remove"===t&&(s.current=s.current.filter((function(t){return t.id!==e.id})))}})}):Object(r.jsxs)(m.a,{children:[t.image&&Object(r.jsx)(H.a,{image:t.image,title:t.name,className:c.media}),Object(r.jsx)(u.a,{gutterBottom:!0,className:c.productName,children:t.name}),Object(r.jsxs)(u.a,{className:c.price,children:["Rs ",t.price]}),Object(r.jsx)(u.a,{className:c.description,children:t.description})]})}),Object(r.jsx)(y.a,{}),Object(r.jsx)(m.a,{p:2,children:h?null:Object(r.jsxs)(l.a,{container:!0,justify:"space-between",spacing:2,children:[Object(r.jsx)(d.a,{variant:"outlined",color:"primary",onClick:function(){!function(e){var t=Object.assign({},e);t.quantity=1,t.price=e.price,p.current=t,t.customisation.length?f(!0):v()}(t)},className:c.button,endIcon:Object(r.jsx)(M.a,{className:c.removeButton}),children:"Add"}),Object(r.jsx)(u.a,{align:"center",color:"textPrimary",gutterBottom:!0,style:{fontSize:"1rem"},children:(g&&g.quantity||0)+" Nos"}),Object(r.jsx)(d.a,{variant:"outlined",color:"primary",onClick:function(){!function(e){var t=Object.assign({},e);t.customisations=[],i(Object(q.G)(t))}(t)},className:c.button,endIcon:Object(r.jsx)(U.a,{className:c.addButton}),children:"Remove"})]})})]})})},ne=c(555),re=c(393),ae=c(386),ie=c(387),oe=c(512),se=c.n(oe),le=c(557),de=c.n(le),je=Object(o.a)((function(e){return{cartItems:{width:"5rem",fontSize:".7rem"},addButton:{fill:e.colors.red,"&:hover":{fill:"black"},cursor:"pointer"},removeButton:{fill:e.colors.green,"&:hover":{fill:"black"},cursor:"pointer"},actionsCard:{display:"flex",padding:".5rem",background:"#eae9e92b"}}})),ue=function(e){var t=e.item,c=Object(C.b)(),n=je();return Object(r.jsx)(l.a,{item:!0,xs:12,children:Object(r.jsx)(L.c,{children:Object(r.jsxs)(b.a,{children:[Object(r.jsx)(j.a,{style:{padding:"unset"},children:Object(r.jsx)(m.a,{p:2,children:Object(r.jsxs)(l.a,{container:!0,justify:"space-between",spacing:1,children:[Object(r.jsx)(l.a,{item:!0,xs:5,children:Object(r.jsx)(u.a,{noWrap:!0,children:t.name})}),Object(r.jsx)(l.a,{xs:4,item:!0,children:Object(r.jsxs)(b.a,{className:n.actionsCard,children:[Object(r.jsx)(M.a,{onClick:function(){return function(e){var t=Object.assign({},e);t.quantity=1,t.cartItemPanel=!0,c(Object(q.e)(t))}(t)},className:n.addButton}),Object(r.jsx)(u.a,{className:n.cartItems,variant:"h5",align:"center",children:t.quantity}),Object(r.jsx)(de.a,{onClick:function(){return e=t,void c(Object(q.G)(e));var e},className:n.removeButton})]})}),Object(r.jsx)(l.a,{item:!0,xs:3,children:Object(r.jsxs)(u.a,{gutterBottom:!0,variant:"h5",children:["$ ",t.cost]})})]})})}),Object(r.jsx)(v.a,{})]})})})},be=c(569),me=c(72),xe=c(511),Oe=0,he=Object(xe.a)((function(e){return e.order&&e.order.selectedProducts||[]}),(function(e){return e.map((function(e){return e.items&&e.items.reduce((function(e,t){return e.concat(t)}),[])})).reduce((function(e,t){return e.concat(t)}),[])})),fe=Object(xe.a)(he,(function(e){return e.map((function(e){Oe=0;var t=e&&e.customisations&&e.customisations.reduce((function(e,t){return e+t.price}),0)+e.price;return e.quantity>1?Oe+=t*e.quantity:Oe+=t,Oe}))})),pe=Object(xe.a)(he,fe,(function(e,t){return{orderedProducts:e||[],totalCost:t.reduce((function(e,t){return e+t}),0)||0}})),ge=Object(o.a)((function(e){return{root:{width:"100%"},emptyCart:{display:"flex",flexDirection:"column"},emptyCartImage:{width:"10rem",alignSelf:"center"},emptyCartText:{color:e.palette.text.primary,fontSize:"1.2rem",alignSelf:"center",paddingBottom:"1rem"},cartTitle:{color:e.palette.text.primary,fontSize:"1.4rem",padding:"1rem",fontWeight:800},cartTitleMobile:{color:e.palette.text.primary,fontSize:"1rem",padding:"1rem",fontWeight:800},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},orderButton:{backgroundColor:e.colors.green},orderBox:{display:"flex",justifyContent:"space-between"},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"33.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:e.spacing(1,2)},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}}}})),ye=function(){var e=Object(C.b)(),t=ge(),c=Object(C.c)((function(e){return e.order}))||{},i=Object(C.c)((function(e){return e.table}))||{},o=c.selectedProducts||[],s=Object(a.useState)(!1),x=Object(n.a)(s,2),O=x[0],h=x[1],f=Object(C.c)(pe),p=f.orderedProducts,g=f.totalCost,v=function(){var t={},c=p.slice(0);c=c.map((function(e){var t=Object.assign({},e);return t.customisations=e.customisations.map((function(e){return e.id})),t})),t.tableId=i.selectedTable.id,t.products=c,t.price=g,t.status="ordered",e(Object(q.c)(t))};return ne.isMobile?Object(r.jsx)(l.a,{container:!0,justify:"center",fullWidth:!0,children:O?Object(r.jsxs)(b.a,{style:{bottom:"0",position:"fixed",width:"90%",maxHeight:"70vh",overflow:"scroll"},children:[Object(r.jsx)(re.a,{expandIcon:Object(r.jsx)(se.a,{onClick:function(){h(!O)}}),children:Object(r.jsx)(u.a,{className:t.cartTitleMobile,children:"Items in your cart"})}),Object(r.jsx)(ae.a,{className:t.details,children:Object(r.jsx)(b.a,{style:{display:"flex",flexDirection:"column",width:"100%"},children:p.map((function(e,t){return console.log("l",e),Object(r.jsx)(ue,{item:e},e.id+t)}))})}),Object(r.jsx)(y.a,{}),Object(r.jsxs)(ie.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(r.jsxs)(u.a,{gutterBottom:!0,variant:"h5",children:["Total Cost: ",g]}),Object(r.jsx)(d.a,{variant:"contained",onClick:function(){v()},disabled:!o.length,className:t.orderButton,endIcon:Object(r.jsx)(be.a,{}),children:"Place Order"})]})]}):Object(r.jsxs)(m.a,{style:{display:"flex",justifyContent:"center",bottom:"0",position:"fixed"},children:[Object(r.jsx)(d.a,{style:{background:me.a[500],margin:"1rem"},variant:"contained",onClick:function(){e(Object(q.A)(!1))},children:"Go back"}),Object(r.jsx)(d.a,{style:{background:Y.a[500],margin:"1rem"},variant:"contained",onClick:function(){h(!O)},children:"Cart"})]})}):Object(r.jsxs)(m.a,{style:{display:"flex",flexDirection:"column",minHeight:"20vh",width:"30%"},children:[Object(r.jsx)(u.a,{gutterBottom:!0,className:t.cartTitle,component:"h2",children:"Items in your cart"}),0===o.length&&Object(r.jsxs)(m.a,{className:t.emptyCart,children:[Object(r.jsx)("img",{alt:"empty-cart",src:"/images/empty-plate.png",className:t.emptyCartImage}),Object(r.jsx)(u.a,{variant:"h5",component:"h2",className:t.emptyCartText,children:"Uh, oh! your cart looks empty"})]}),p.map((function(e,t){return Object(r.jsx)(ue,{item:e},e.id+t)})),Object(r.jsx)(y.a,{}),o.length>0?Object(r.jsx)(l.a,{item:!0,xs:12,children:Object(r.jsx)(L.c,{children:Object(r.jsx)(j.a,{children:Object(r.jsxs)(m.a,{className:t.orderBox,children:[Object(r.jsxs)(u.a,{gutterBottom:!0,variant:"h5",children:["Total Cost: ",g]}),Object(r.jsx)(d.a,{variant:"contained",onClick:function(){v()},disabled:!o.length,className:t.orderButton,endIcon:Object(r.jsx)(be.a,{}),children:"Place Order"})]})})})}):Object(r.jsx)("div",{})]})},ve=Object(o.a)((function(e){return{sortBy:{width:"10rem"},helperBox:{display:"flex",flexDirection:"row",marginTop:"1rem",justifyContent:"space-between"},button:{width:"9rem",fontSize:".9rem",marginRight:".5rem"}}})),Ce=function(){var e=Object(C.b)(),t=ve(),c=Object(C.c)((function(e){return e.product})),i=Object(a.useState)([]),o=Object(n.a)(i,2),s=o[0],u=o[1],b=Object(a.useState)(""),x=Object(n.a)(b,2),O=x[0],h=x[1],f=Object(a.useRef)(""),p=Object(C.c)((function(e){return e.branch})),g=p&&p.topProducts||[],y=c&&c.products||[],v=function(e){f.current=e,u(y.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())})))};return Object(a.useEffect)((function(){e(Object(q.w)())}),[]),Object(a.useEffect)((function(){v(""),u(y)}),[y]),Object(r.jsxs)(l.a,{container:!0,maxWidth:!0,children:[Object(r.jsxs)(l.a,{style:{marginRight:"1rem"},item:!0,lg:7,children:[Object(r.jsx)(m.a,{children:Object(r.jsxs)(j.a,{children:[Object(r.jsx)(S.a,{fullWidth:!0,onChange:function(e){v(e.target.value)},InputProps:{startAdornment:Object(r.jsx)(z.a,{position:"start",children:Object(r.jsx)(I.a,{fontSize:"small",color:"action",children:Object(r.jsx)(R.a,{})})})},placeholder:"Search for dishes",variant:"outlined",value:f.current}),Object(r.jsxs)(m.a,{className:t.helperBox,children:[Object(r.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){u(g)},className:t.button,children:"Top ordered"}),Object(r.jsxs)(P.a,{className:t.sortBy,variant:"outlined",children:[Object(r.jsx)(D.a,{id:"demo-simple-select-outlined-label",children:"Sort by"}),Object(r.jsxs)(T.a,{value:O,onChange:function(e){!function(e){var t=s.slice(0);if(h(e),t.length>1)switch(f.current&&(t=t.filter((function(e){return e.name.toLowerCase().includes(f.current.toLowerCase())}))),e){case"ascending":u(t.sort((function(e,t){return e.price-t.price})));break;case"descending":u(t.sort((function(e,t){return t.price-e.price})))}}(e.target.value)},label:"Sort by",children:[Object(r.jsx)(W.a,{value:"",children:Object(r.jsx)("em",{children:"None"})}),Object(r.jsx)(W.a,{value:"ascending",children:"Price low to high"}),Object(r.jsx)(W.a,{value:"descending",children:"Price high to low"})]})]})]})]})}),Object(r.jsx)(l.a,{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:s.map((function(e,t){return Object(r.jsx)(l.a,{item:!0,lg:6,xs:12,children:Object(r.jsx)(ce,{product:e})},e.id+t)}))})]}),Object(r.jsx)(ye,{})]})},Ne=c(16),Be=Object(o.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column"},productName:{color:e.palette.text.primary,fontSize:"1.6rem",fontWeight:"750",lineHeight:"1.8rem"},card:{marginBottom:".7rem","&:hover":{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}},content:{display:"flex",flexDirection:"column",margin:"1rem"},price:{color:e.palette.text.primary,fontSize:"1rem",margin:".5rem"},quantity:{color:e.palette.text.primary,fontSize:"1rem",margin:".5rem"},status:{color:e.palette.text.primary,fontSize:"1rem",margin:".5rem",background:"yellow",fontWeight:"600"},detailsBox:{display:"flex",flexDirection:"row"},topButton:{alignSelf:"center",width:"15rem"}}}));t.default=function(){var e=Be(),t=Object(C.b)(),c=Object(C.c)((function(e){return e.order}))||{},o=Object(C.c)((function(e){return e.table})),N=o&&o.selectedTable||{},w=c.orders||[],S=Object(Ne.h)().code,z=w.map((function(e){return e.orderItems})).reduce((function(e,t){return e.concat(t)}),[]),I=i.a.useState({id:null}),P=Object(n.a)(I,2),D=P[0],T=P[1];Object(a.useEffect)((function(){S&&t(Object(q.t)(S))}),[t,S]),Object(a.useEffect)((function(){N.id&&t(Object(q.p)(N.id))}),[t,N]);var W=function(){t(Object(q.r)()),t(Object(q.A)(!0))};return Object(r.jsx)(s.a,{maxWidth:!0,children:c&&c.add?Object(r.jsx)(Ce,{table:N}):Object(r.jsxs)(l.a,{item:!0,xs:12,className:e.content,children:[Object(r.jsx)(d.a,{color:"primary",onClick:function(){W()},variant:"contained",className:e.topButton,children:"Place another order"}),Object(r.jsxs)(j.a,{className:e.root,children:[Object(r.jsx)(u.a,{color:"textPrimary",gutterBottom:!0,variant:"h3",children:N.name}),Object(r.jsx)(u.a,{color:"textSecondary",variant:"body1",children:"".concat(N.branchName)}),z.map((function(t){return Object(r.jsxs)(b.a,{className:e.card,children:[Object(r.jsxs)(j.a,{children:[Object(r.jsx)(u.a,{gutterBottom:!0,className:e.productName,children:t.productName}),Object(r.jsxs)(m.a,{className:e.detailsBox,children:[Object(r.jsxs)(u.a,{className:e.price,children:[t.currency," ",t.price]}),Object(r.jsxs)(u.a,{className:e.quantity,children:[t.quantity," Nos"]}),Object(r.jsx)(u.a,{className:e.status,children:t.status})]}),Object(r.jsxs)(m.a,{children:[Object(r.jsx)(x.a,{"aria-label":"expand row",size:"small",onClick:function(){var e;D===(e=t).id?T(null):T(e.id)},children:D===t.id?Object(r.jsx)(k.a,{}):Object(r.jsx)(B.a,{})})," ","Addons",Object(r.jsx)(O.a,{in:D===t.id,timeout:"auto",unmountOnExit:!0,children:Object(r.jsxs)(m.a,{margin:1,children:[Object(r.jsx)(u.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Customisations"}),Object(r.jsx)(h.a,{size:"small","aria-label":"customisations",children:Object(r.jsx)(f.a,{children:t.customisations.length?t.customisations.map((function(e){return Object(r.jsxs)(p.a,{children:[Object(r.jsx)(g.a,{component:"th",scope:"row",children:e.name}),Object(r.jsxs)(g.a,{align:"right",children:[e.currency," ",e.price]})]},e.id)})):Object(r.jsx)(u.a,{variant:"h6",gutterBottom:!0,component:"div",children:"No Customisations added"})})})]})})]})]}),Object(r.jsx)(y.a,{})]},t.id)}))]}),Object(r.jsx)(y.a,{}),Object(r.jsx)(v.a,{children:Object(r.jsx)(d.a,{color:"primary",onClick:function(){W()},fullWidth:!0,variant:"text",children:"Place another order"})})]})})}}}]);
//# sourceMappingURL=21.18c7e27c.chunk.js.map