{"version":3,"sources":["components/Page.js","views/auth/LoginView.js"],"names":["Page","forwardRef","ref","children","title","rest","propTypes","PropTypes","node","isRequired","string","useStyles","makeStyles","theme","root","height","paddingBottom","spacing","paddingTop","box","display","homeBox","backgroundImage","backgroundRepeat","backgroundSize","margin","loginBox","marginTop","loginIcon","width","color","link","fontSize","fontWeight","marginLeft","LoginView","classes","navigate","useNavigate","dispatch","useDispatch","appState","useSelector","state","app","user","alert","show","Toast","message","hideAlert","isAuthenticated","role","replace","className","item","md","xs","initialValues","userName","password","validationSchema","Yup","shape","max","required","onSubmit","values","formik","login","setSubmitting","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched","mb","variant","gutterBottom","error","Boolean","fullWidth","helperText","label","name","type","onBlur","onChange","value","my","disabled","isFormValid","size","data-testid","endIcon","status","component","RouterLink","to"],"mappings":"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","file":"static/js/19.df3d0ec3.chunk.js","sourcesContent":["import React, { forwardRef } from 'react';\nimport { Helmet } from 'react-helmet';\nimport PropTypes from 'prop-types';\n\nconst Page = forwardRef(({ children, title = '', ...rest }, ref) => (\n  <div ref={ref} {...rest}>\n    <Helmet>\n      <title>{title}</title>\n    </Helmet>\n    {children}\n  </div>\n));\n\nPage.propTypes = {\n  children: PropTypes.node.isRequired,\n  title: PropTypes.string,\n};\n\nexport default Page;\n","import React from 'react';\nimport { Link as RouterLink, useNavigate } from 'react-router-dom';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport makeStyles from \"@material-ui/styles/makeStyles\";\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport Link from '@material-ui/core/Link';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport Page from '../../components/Page';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { login, hideAlert } from '../../actions';\nimport Toast from '../../modules/toast';\nimport {isFormValid} from '../../modules/helpers';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100%',\n    paddingBottom: theme.spacing(3),\n    paddingTop: theme.spacing(3),\n  },\n  box:{\n    display: 'flex'\n  },\n  homeBox: {\n    height: '100%',\n    backgroundImage: `url('/images/bg.png')`,\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'contain',\n    margin: theme.spacing(6)\n  },\n  loginBox: {\n    height: '100%',\n    marginTop: theme.spacing(10)\n  },\n  loginIcon :{\n    width: '1.2rem !important',\n    height: 'unset !important',\n    color: 'white'\n  },\n  link: {\n    fontSize :\"1rem\",\n    fontWeight:\"600\",\n    marginLeft:\".2rem\"\n  }\n}));\n\nconst LoginView = () => {\n  const classes = useStyles();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const appState = useSelector(state => state.app);\n  const user = useSelector(state => state.user);\n\n  if (appState.alert.show) {\n    Toast({ message: appState.alert.message });\n    dispatch(hideAlert());\n  }\n    if (user.isAuthenticated) {\n      if(user.user.role === 'table'){\n        navigate('/table', { replace: true });\n        return;\n      }\n      if(user.user.role === 'kitchen'){\n        navigate('/app/kitchen', { replace: true });\n        return;\n      }\n      navigate('/app/dashboard', { replace: true });\n    }\n\n  return (\n    <Page className={classes.root} title=\"Login\">\n      <Box className={classes.box}>\n        <Container className={classes.box}>\n        <Grid item md={12} xs={false} className={classes.homeBox}>\n        </Grid>\n        <Grid className={classes.loginBox} item md={12} xs={12}>\n          <Formik\n            initialValues={{\n              userName: '',\n              password: '',\n            }}\n            validationSchema={Yup.object().shape({\n              userName: Yup.string()\n                .max(255)\n                .required('UserName is required'),\n              password: Yup.string()\n                .max(255)\n                .required('Password is required'),\n            })}\n            onSubmit={(values, formik) => {\n              dispatch(login(values));\n              formik.setSubmitting(false);\n            }}\n          >\n            {({\n              errors,\n              handleBlur,\n              handleChange,\n              handleSubmit,\n              isSubmitting,\n              touched,\n              values,\n            }) => (\n\n              <form onSubmit={handleSubmit}>\n                <Box mb={3}>\n                  <Typography color=\"textPrimary\" variant=\"h2\">\n                    Sign in\n                  </Typography>\n                  <Typography color=\"textSecondary\" gutterBottom variant=\"body2\">\n                    Sign in on the internal platform\n                  </Typography>\n                </Box>\n                <TextField\n                  error={Boolean(touched.userName && errors.userName)}\n                  fullWidth\n                  helperText={touched.userName && errors.userName}\n                  label=\"Username\"\n                  margin=\"normal\"\n                  name=\"userName\"\n                  type=\"text\"\n                  onBlur={handleBlur}\n                  onChange={handleChange}\n                  value={values.userName}\n                  variant=\"outlined\"\n                />\n                <TextField\n                  error={Boolean(touched.password && errors.password)}\n                  fullWidth\n                  helperText={touched.password && errors.password}\n                  label=\"Password\"\n                  margin=\"normal\"\n                  name=\"password\"\n                  onBlur={handleBlur}\n                  onChange={handleChange}\n                  type=\"password\"\n                  value={values.password}\n                  variant=\"outlined\"\n                />\n                <Box my={2}>\n                  <Button\n                    color=\"primary\"\n                    disabled={isSubmitting || !isFormValid(errors, touched)}\n                    fullWidth\n                    size=\"large\"\n                    type=\"submit\"\n                    variant=\"contained\"\n                    data-testid=\"label\"\n                    endIcon={user.status === 'loading' ? <CircularProgress className={classes.loginIcon} /> : <ArrowForwardIosIcon className={classes.loginIcon} />}\n                  >\n                    Sign in now\n                  </Button>\n                </Box>\n                <Typography color=\"textSecondary\" variant=\"body1\">\n                  Don&apos;t have an account?{' '}\n                  <Link component={RouterLink} to=\"/register\" className={classes.link}>\n                    Sign up\n                  </Link>\n                </Typography>\n              </form>\n            )}\n          </Formik>\n        </Grid>\n        </Container>\n      </Box>\n    </Page>\n  );\n};\n\nexport default LoginView;\n"],"sourceRoot":""}